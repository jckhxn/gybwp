{"version":3,"file":"usePrefersColorScheme.js","sources":["../../src/studio/usePrefersColorScheme.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-empty-function */\nimport type {ThemeColorSchemeKey} from '@sanity/ui'\nimport {useSyncExternalStore} from 'react'\n\nfunction createStore() {\n  if (typeof document === 'undefined') {\n    return {\n      subscribe: () => () => {},\n      getSnapshot: () => 'light' as const,\n      getServerSnapshot: () => 'light' as const,\n    }\n  }\n\n  const matchMedia = window.matchMedia('(prefers-color-scheme: dark)')\n\n  return {\n    subscribe: (onStoreChange: () => void) => {\n      matchMedia.addEventListener('change', onStoreChange)\n      return () => matchMedia.removeEventListener('change', onStoreChange)\n    },\n    getSnapshot: () => (matchMedia.matches ? 'dark' : 'light'),\n    getServerSnapshot: () => 'light' as const,\n  }\n}\nconst store = createStore()\n\n/** @alpha */\nexport function usePrefersColorScheme(): ThemeColorSchemeKey {\n  return useSyncExternalStore(store.subscribe, store.getSnapshot, store.getServerSnapshot)\n}\n"],"names":["subscribe","matchMedia"],"mappings":";;AAIA;AACM;;AAEAA;;;;AAIJ;AAEM;;;AAISC;;;;;;AAMjB;AACA;AAGO;AACL;AACF;"}