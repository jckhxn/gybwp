import type { ContentSourceMap } from '@sanity/client'
import type { ContentSourceMap as ContentSourceMap_2 } from '@sanity/client/csm'
import type { ContentSourceMapParsedPathKeyedSegment } from '@sanity/client/csm'

/**
 * @deprecated - use `import {stegaEncodeSourceMap} from '@sanity/client/stega' instead
 */
export declare function createTranscoder(
  config: CreateTranscoderConfig,
): Transcoder

/**
 * @deprecated Please use `import {InitializedStegaConfig} from @sanity/client/stega` instead
 */
export declare interface CreateTranscoderConfig {
  /**
   * Where the Studio is hosted.
   * If it's embedded in the app, use the base path for example `/studio`.
   * Otherwise provide the full URL to where the Studio is hosted, for example: `https://blog.sanity.studio`.
   *
   * @alpha
   */
  studioUrl: StudioUrl
  /**
     * Some strings shouldn't be encoded, for example if you store internal URLs the stega characters will break routing.
     * ```ts
     {
     encodeSourceMapAtPath: (props) => {
     switch (props.path.at(-1)) {
     case 'url':
     return false
     default:
     return props.filterDefault(props)
     }
     }
     }
     * ```
     * @alpha
     */
  encodeSourceMapAtPath?: FilterDefault
  /**
   * Specify a `console.log` compatible logger to see debug logs, which keys are encoded and which are not.
   *
   * @alpha
   */
  logger?: Logger
}

/** @deprecated */
export declare type FilterDefault = (props: {
  path: PathSegment[]
  filterDefault: FilterDefault
}) => boolean

export declare type Logger =
  | typeof console
  | Partial<
      Pick<
        typeof console,
        'debug' | 'error' | 'groupCollapsed' | 'groupEnd' | 'log' | 'table'
      >
    >

/** @deprecated Please use `resolveEditUrl` from `@sanity/client/csm` instead */
export declare function mapToEditLinks<R>(
  result: R,
  csm: ContentSourceMap,
  studioUrl: string,
): R

/** @deprecated */
export declare type PathSegment =
  | string
  | number
  | ContentSourceMapParsedPathKeyedSegment

/** @deprecated */
export declare type StudioUrl =
  | `/${string}`
  | `${string}.sanity.studio`
  | `https://${string}`
  | string

/** @deprecated */
export declare type Transcoder = <R>(
  result: R,
  csm: ContentSourceMap_2,
) => TranscoderResult<R>

/** @deprecated */
export declare type TranscoderResult<R> = {
  result: R
  report: Record<
    'encoded' | 'skipped',
    {
      path: string
      length: number
      value: string
    }[]
  >
}

export {}
