"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{4766:function(e,n,t){t.r(n),t.d(n,{DocumentPane:function(){return tm},index:function(){return tC},useDeskToolSetting:function(){return e3}});var i,l,r,a,s,o,d,c,u,p,h,f,x,m,j,g,v,b,y,w,_,k=t(57437),C=t(2265),z=t(28501),P=t(12195),S=t(25727),I=t.n(S),E=t(44660),M=t(85147),O=t(29314),L=t(20920),R=t(82586);function T(e,n){var t="object"==typeof n;return new Promise(function(i,l){var r=new R.Hp({next:function(e){i(e),r.unsubscribe()},error:l,complete:function(){t?i(n.defaultValue):l(new L.K)}});e.subscribe(r)})}var W=t(52005),Z=t(75171),N=t(92392),F=t(73271),D=t(28481),A=t(89967),K=t(41670),U=t(89402),V=t(45685),X=t(72211),B=t(72849),q=t(46567),H=t(76754),$=t(67581),Y=t(55812),J=t(42643),Q=t(3221),G=t(26400),ee=t(42299),en=t(81132),et=t(42077),ei=t.n(et),el=t(62740),er=t(55894),ea=t(91806),es=t(45211);t(72140),t(31423),t(48911),t(44601),t(53530),t(94468),t(65574);var eo=t(25794);t(35794);var ed=t(86566),ec=t(38146);t(71881),t(33874);var eu=t(63070),ep=t(98503),eh=t.n(ep),ef=t(23746),ex=t.n(ef),em=t(97870);let ej=e=>{let{actions:n,children:t,actionProps:i,onActionComplete:l}=e;return(0,k.jsx)(ee.duV,{onReset:l,hooks:n,args:i,children:t})},eg=e=>{let{badges:n,children:t,badgeProps:i,...l}=e;return(0,k.jsx)(ee.duV,{...l,hooks:n,args:i,children:t})},ev=[];function eb(e){let{children:n,flatIndex:t,index:i,params:l,payload:r,siblingIndex:a}=e,{navigate:s,navigateIntent:o}=(0,el.tv)(),d=(0,el.z)(),c=(0,C.useMemo)(()=>(null==d?void 0:d.panes)||ev,[null==d?void 0:d.panes]),u=i-1,p=(0,C.useCallback)(e=>{let n=c[u]||[],t=n[a],i=e(n,t),l=[...c.slice(0,u),i,...c.slice(u+1)],r={...d||{},panes:l};return setTimeout(()=>s(r),0),r},[u,s,c,d,a]),h=(0,C.useCallback)(e=>{p((n,t)=>[...n.slice(0,a),{...t,payload:e},...n.slice(a+1)])},[p,a]),f=(0,C.useCallback)(e=>{p((n,t)=>[...n.slice(0,a),{...t,params:e},...n.slice(a+1)])},[p,a]),x=(0,C.useCallback)(e=>{let{id:n,parentRefPath:t,type:i,template:l}=e;s({panes:[...c.slice(0,u+1),[{id:n,params:{template:l.id,parentRefPath:(0,ec.BB)(t),type:i},payload:l.params}]]})},[u,s,c]),m=(0,C.useMemo)(()=>({index:t,groupIndex:u,siblingIndex:a,payload:r,params:l,hasGroupSiblings:!!c[u]&&c[u].length>1,groupLength:c[u]?c[u].length:0,routerPanesState:c,ChildLink:P.aL,BackLink:P.hb,ReferenceChildLink:P.HZ,handleEditReference:x,ParameterizedLink:P.V$,replaceCurrent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(()=>[{id:e.id||"",payload:e.payload,params:e.params||{}}])},closeCurrent:()=>{p((e,n)=>e.length>1?e.filter(e=>e!==n):e)},duplicateCurrent:e=>{p((n,t)=>{let i={...t,payload:(null==e?void 0:e.payload)||t.payload,params:(null==e?void 0:e.params)||t.params};return[...n.slice(0,a),i,...n.slice(a)]})},setView:e=>{let n=I()(l,"view");return f(e?{...n,view:e}:n)},setParams:f,setPayload:h,navigateIntent:o}),[t,u,x,p,o,l,r,c,f,h,a]);return(0,k.jsx)(P.ud.Provider,{value:m,children:n})}let ey=[];function ew(e){let{documentId:n,documentType:t,flex:i}=e,{collapsed:l}=(0,P.ec)(),{closeInspector:r,inspector:a}=(0,P.Z3)(),{features:s}=(0,P.xu)(),o=(0,C.useCallback)(()=>{a&&r(a.name)},[r,a]);if(l||!a)return null;let d=(0,C.createElement)(a.component,{onClose:o,documentId:n,documentType:t});return s.resizablePanes?(0,k.jsx)(P.ez,{as:"aside","data-ui":"DocumentInspectorPanel",flex:i,maxWidth:P.zY,minWidth:P.VQ,children:d}):(0,k.jsx)(z.xu,{as:"aside","data-ui":"DocumentInspectorPanel",flex:i,children:d})}var e_=Object.defineProperty,ek=(e,n,t)=>n in e?e_(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,eC=(e,n,t)=>(ek(e,"symbol"!=typeof n?n+"":n,t),t);class ez extends Error{constructor(e){let{message:n,context:t,helpId:i,cause:l}=e;super(n),eC(this,"cause"),eC(this,"context"),eC(this,"helpId"),this.context=t,this.helpId=i,this.cause=l}}let eP=new WeakMap;function eS(e){let n=eP.get(e);if(n)return n;let t=(0,D.x0)();return eP.set(e,t),t}let eI=new WeakMap;function eE(e,n){let t=eI.get(e)||new Map;if(t){let e=t.get(n);if(e)return e}let i=e[n];if("function"!=typeof i)throw Error("Expected property `".concat(n,"` to be a function but got ").concat(typeof i," instead."));let l=i.bind(e);return t.set(n,l),eI.set(e,t),l}let eM=e=>!!e&&"function"==typeof(null==e?void 0:e.then),eO=e=>!!(0,ee.Uy$)(e)&&"function"==typeof e.serialize,eL=e=>(n,t,i)=>{try{return e(n,t,i)}catch(e){if(e instanceof ez)throw e;throw new ez({message:"string"==typeof(null==e?void 0:e.message)?e.message:"",context:t,cause:e})}},eR=e=>function(){return e(...arguments).pipe((0,A._)(1),(0,K.x)())};function eT(e){let n=eL(eR(e((e,t,i)=>{if(!e)throw new ez({message:"Pane returned no child",context:t,helpId:"structure-item-returned-no-child"});return eM(e)||(0,E.b)(e)?(0,M.D)(e).pipe((0,U.w)(e=>n(e,t,i))):eO(e)?n(e.serialize(t),t,i):"function"==typeof e?n(e(t.id,t),t,i):(0,O.of)(e)})));return n}async function eW(e){let n=new Map,t=eT(e=>(t,i,l)=>{let r=t&&"".concat(eS(t),"-").concat(i.path.join("__")),a=r&&n.get(r);if(a)return a;let s=e(t,i,l);return r&&n.set(r,s),s}),i=[[{id:"__edit__".concat(e.params.id),params:{...I()(e.params,["id"]),type:e.params.type},payload:e.payload}]];async function l(e){var n;let{currentId:i,flatIndex:r,intent:a,params:s,parent:o,path:d,payload:c,unresolvedPane:u,levelIndex:p,structureContext:h}=e;if(!u)return[];let{id:f,type:x,...m}=s,j=await T(t(u,{id:i,splitIndex:0,parent:o,path:d,index:r,params:{},payload:void 0,structureContext:h},r));return"document"===j.type&&j.id===f?[{panes:[...d.slice(0,d.length-1).map(e=>[{id:e}]),[{id:f,params:m,payload:c}]],depthIndex:d.length,levelIndex:p}]:(null==(n=j.canHandleIntent)?void 0:n.call(j,a,s,{pane:j,index:r}))||"documentList"===j.type&&j.schemaTypeName===x&&"_type == $type"===j.options.filter?[{panes:[...d.map(e=>[{id:e}]),[{id:s.id,params:m,payload:c}]],depthIndex:d.length,levelIndex:p}]:"list"===j.type&&j.child&&j.items?(await Promise.all(j.items.map((e,n)=>"divider"===e.type?Promise.resolve([]):l({currentId:e._id||e.id,flatIndex:r+1,intent:a,params:s,parent:j,path:[...d,e.id],payload:c,unresolvedPane:"function"==typeof j.child?eE(j,"child"):j.child,levelIndex:n,structureContext:h})))).flat():[]}let r=await l({currentId:"root",flatIndex:0,levelIndex:0,intent:e.intent,params:e.params,parent:null,path:[],payload:e.payload,unresolvedPane:e.rootPaneNode,structureContext:e.structureContext}),a=r.sort((e,n)=>e.depthIndex===n.depthIndex?e.levelIndex-n.levelIndex:e.depthIndex-n.depthIndex)[0];return a?a.panes:i}let eZ=(e,n)=>{let t=e.replace(/^__edit__/,""),{params:i,payload:l,structureContext:{resolveDocumentNode:r}}=n,{type:a,template:s}=i;if(!a)throw Error("Document type for document with ID ".concat(t," was not provided in the router params."));let o=r({schemaType:a,documentId:t}).id("editor");return s&&(o=o.initialValueTemplate(s,l)),o.serialize()},eN=e=>{let n={type:e.type,id:e.routerPaneSibling.id,params:e.routerPaneSibling.params||{},payload:e.routerPaneSibling.payload||null,flatIndex:e.flatIndex,groupIndex:e.groupIndex,siblingIndex:e.siblingIndex,path:e.path,paneNode:"resolvedMeta"===e.type?eS(e.paneNode):null};return"metaHash(".concat(JSON.stringify(n),")")};async function eF(e,n,t){if(n&&t)return{id:n,type:t};if(!n&&t)return{id:(0,er.Z)(),type:t};if(n&&!t){let t=await T(e.resolveTypeForDocument(n));return{id:n,type:t}}throw new ez({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}let eD={},eA=(0,C.memo)(function(){let{navigate:e}=(0,el.tv)(),n=(0,el.z)((0,C.useCallback)(e=>{let n="string"==typeof e.intent?e.intent:void 0;return n?{intent:n,params:(0,ee.Uy$)(e.params)?e.params:eD,payload:e.payload}:void 0},[])),{rootPaneNode:t,structureContext:i}=(0,P.xu)(),l=(0,ee.H__)(),[r,a]=(0,C.useState)(null);if(r)throw r;return(0,C.useEffect)(()=>{if(n){let{intent:r,params:s,payload:o}=n,d=!1;return(async function(){let{id:n,type:a}=await eF(l,"string"==typeof s.id?s.id:void 0,"string"==typeof s.type?s.type:void 0);if(d)return;let c=await eW({intent:r,params:{...s,id:n,type:a},payload:o,rootPaneNode:t,structureContext:i});d||e({panes:c},{replace:!0})})().catch(a),()=>{d=!0}}},[l,n,e,t,i]),null});var eK=Object.freeze,eU=Object.defineProperty;let eV=ea.ZP.span(c||(c=eK(eU(i=["\n  &:not(:last-child)::after {\n    content: ' ➝ ';\n    opacity: 0.5;\n  }\n"],"raw",{value:eK(i.slice())}))));function eX(e){let{error:n}=e;if(!(n instanceof ez))throw n;let{cause:t}=n,i=(null==t?void 0:t.stack)||n.stack,l=i&&!(t instanceof P.zc)&&!n.message.includes("Module build failed:"),r=t instanceof P.zc?t.path:[],a=t instanceof P.zc&&t.helpId||n.helpId,s=(0,C.useCallback)(()=>{window.location.reload()},[]);return(0,k.jsx)(z.Zb,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:(0,k.jsxs)(z.W2,{children:[(0,k.jsx)(z.X6,{as:"h2",children:"Encountered an error while reading structure"}),(0,k.jsxs)(z.Zb,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[r.length>0&&(0,k.jsxs)(z.Kq,{space:2,children:[(0,k.jsx)(z.__,{children:"Structure path"}),(0,k.jsx)(z.EK,{children:r.slice(1).map((e,n)=>(0,k.jsx)(eV,{children:e},"".concat(e,"-").concat(n)))})]}),(0,k.jsxs)(z.Kq,{marginTop:4,space:2,children:[(0,k.jsx)(z.__,{children:"Error"}),(0,k.jsx)(z.EK,{children:l?i.replace(/\(\.\.\.\)\./g,"(...)\n  .").replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," ("):n.message})]}),a&&(0,k.jsx)(z.xu,{marginTop:4,children:(0,k.jsx)(z.xv,{children:(0,k.jsx)("a",{href:(0,en.h)(a),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),(0,k.jsx)(z.xu,{marginTop:4,children:(0,k.jsx)(z.zx,{text:"Reload",icon:es.bnu,tone:"primary",onClick:s})})]})]})})}function eB(e){let{isSelected:n,pane:t,paneKey:i}=e,l=(0,ee.Uy$)(t)&&t.type||null;return(0,k.jsxs)(P.X6,{id:i,selected:n,children:[(0,k.jsx)(P.hX,{title:"Unknown pane type"}),(0,k.jsx)(P.Bh,{children:(0,k.jsx)(z.xu,{padding:4,children:"string"==typeof l?(0,k.jsxs)(z.xv,{as:"p",muted:!0,children:["Structure item of type ",(0,k.jsx)("code",{children:l})," is not a known entity."]}):(0,k.jsxs)(z.xv,{as:"p",muted:!0,children:["Structure item is missing required ",(0,k.jsx)("code",{children:"type"})," property."]})})})]})}function eq(e){let n=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}];if(ee.r8Q){let t=["Check console for errors?","Is your observable/promise resolving?",e.length>0?"Structure path: ".concat(e.join(" ➝ ")):""];n.push({ms:1e4,message:t.join("\n")})}let t=(0,O.of)(null);return(0,F.T)(...n.map(e=>{let{ms:n,message:i}=e;return t.pipe((0,Y.h)(i),(0,J.g)(n))}))}var eH=Object.freeze,e$=Object.defineProperty;let eY=(0,ea.ZP)(z.kC)(u||(u=eH(e$(l=["\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n"],"raw",{value:eH(l.slice())})))),eJ=(0,C.memo)(e=>{let{delay:n=300,flex:t,message:i=eq,minWidth:l,paneKey:r,path:a,selected:s,title:o,tone:d}=e,c=(0,C.useMemo)(()=>"function"==typeof i?i(a?a.split(";"):[]):i,[i,a]),[u,p]=(0,C.useState)(()=>"string"==typeof c?c:"Loading…");(0,C.useEffect)(()=>{if("object"!=typeof c||"function"==typeof c.subscribe)return;let e=c.subscribe(p);return()=>e.unsubscribe()},[c]);let[h,f]=(0,C.useState)(null),[x,m]=(0,C.useState)(!1);(0,C.useEffect)(()=>{if(h)return(0,z.RE)(()=>m(!0))},[h]);let j=(0,k.jsxs)(eY,{align:"center","data-mounted":x?"":void 0,direction:"column",height:"fill",justify:"center",ref:f,children:[(0,k.jsx)(z.$j,{muted:!0}),(o||u)&&(0,k.jsx)(z.xu,{marginTop:3,children:(0,k.jsx)(z.xv,{align:"center",muted:!0,size:1,children:o||u})})]});return(0,k.jsx)(P.X6,{flex:t,id:r,minWidth:l,selected:s,tone:d,children:(0,k.jsx)(P.Bh,{children:j})})});eJ.displayName="LoadingPane";let eQ={component:(0,C.lazy)(()=>t.e(51).then(t.bind(t,58051))),document:(0,C.lazy)(()=>t.e(896).then(t.bind(t,12896))),documentList:(0,C.lazy)(()=>t.e(128).then(t.bind(t,68128))),list:(0,C.lazy)(()=>t.e(173).then(t.bind(t,20173)))},eG=(0,C.memo)(function(e){let{active:n,childItemId:t,groupIndex:i,index:l,itemId:r,pane:a,paneKey:s,params:o,payload:d,path:c,selected:u,siblingIndex:p}=e,h=eQ[a.type]||eB;return(0,k.jsx)(eb,{flatIndex:l,index:i,params:o,payload:d,siblingIndex:p,children:(0,k.jsx)(C.Suspense,{fallback:(0,k.jsx)(eJ,{paneKey:s,path:c,selected:u}),children:(0,k.jsx)(h,{childItemId:t||"",index:l,itemId:r,isActive:n,isSelected:u,paneKey:s,pane:a})})})},(e,n)=>{let{params:t={},payload:i=null,...l}=e,{params:r={},payload:a=null,...s}=n;if(!ei()(t,r)||!ei()(i,a))return!1;let o=new Set([...Object.keys(l),...Object.keys(s)]);for(let e of o)if(l[e]!==s[e])return!1;return!0});function e0(e){let{children:n,currentMinWidth:t,flex:i,minWidth:l,paneKey:r,title:a="Error",tone:s="critical"}=e;return(0,k.jsxs)(P.X6,{currentMinWidth:t,flex:i,id:r,minWidth:l,tone:s,children:[(0,k.jsx)(P.hX,{title:a}),(0,k.jsx)(P.Bh,{overflow:"auto",children:(0,k.jsx)(z.xu,{paddingX:4,paddingY:5,children:n})})]})}let e1=["patch","commit"],e2=(0,C.memo)(function(){let{push:e}=(0,z.pm)(),{documentId:n,documentType:t}=(0,P.Z3)(),i=(0,ee.E6V)(n,t),l=(0,C.useRef)(i);return(0,C.useEffect)(()=>{if(i&&i!==l.current){var n,t;"error"===i.type&&e({closable:!0,duration:3e4,status:"error",title:"delete"===(n=i.op)?"An error occurred while attempting to delete this document.\n      This usually means that there are other documents that refers to it.":"unpublish"===n?"An error occurred while attempting to unpublish this document.\n      This usually means that there are other documents that refers to it.":"An error occurred during ".concat(n),description:(0,k.jsxs)("details",{children:[(0,k.jsx)("summary",{children:"Details"}),i.error.message]})}),"success"!==i.type||e1.includes(i.op)||e({closable:!0,status:"success",title:"publish"===(t=i.op)?"The document was published":"unpublish"===t?"The document was unpublished. A draft has been created from the latest published version.":"discardChanges"===t?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":"delete"===t?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}),l.current=i}},[i,e]),null});function e3(e,n,t){let i=(0,ee.F2f)(),[l,r]=(0,C.useState)(t),a=(0,C.useMemo)(()=>i.forNamespace("desk-tool"),[i]),s=(0,C.useMemo)(()=>e?a.forNamespace(e).forKey(n):a.forKey(n),[a,e,n]);(0,C.useEffect)(()=>{let e=s.listen(t).subscribe({next:r});return()=>null==e?void 0:e.unsubscribe()},[t,n,e,s]);let o=(0,C.useCallback)(e=>{r(e),s.set(e)},[s]);return(0,C.useMemo)(()=>[l,o],[o,l])}let e4={id:"parsed",title:"Parsed"},e5={id:"raw",title:"Raw JSON"},e6=[e4,e5],e8=ex()(1e3);function e7(e){let{path:n}=e,t=e8.get(n);void 0!==t&&e8.set(n,!t)}function e9(e){let n=window.getSelection();if(n){let t=document.createRange();n.removeAllRanges(),t.selectNodeContents(e),n.addRange(t)}}function ne(e){e9(e.currentTarget)}function nn(e){let n=65===e.keyCode&&(e.metaKey||e.ctrlKey);n&&(e.preventDefault(),e9(e.currentTarget))}var nt=Object.freeze,ni=Object.defineProperty,nl=(e,n)=>nt(ni(e,"raw",{value:nt(n||e.slice())}));let nr=ea.ZP.div(e=>{let{theme:n}=e,{color:t,fonts:i,space:l}=n.sanity;return(0,ea.iv)(p||(p=nl(["\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ",";\n      font-size: ","px;\n      line-height: ","px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ",";\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ",";\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: '▸ ';\n      margin-left: calc(0 - "," + 3px);\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: '▾ ';\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ",";\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ",";\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: '↔';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  "])),i.code.family,i.code.sizes[2].fontSize,i.code.sizes[2].lineHeight,(0,z.hO)(l[4]),(0,z.hO)(l[3]),(0,z.hO)(l[4]),i.code.sizes[2].fontSize,i.code.sizes[2].lineHeight,i.code.sizes[2].fontSize,i.code.sizes[2].lineHeight,(0,z.hO)(l[4]/2),t.syntax.property,t.syntax.constant,(0,z.hO)(l[3]),t.syntax.string,t.syntax.boolean,t.syntax.number)});function na(e){let{onChange:n,query:t}=e,i=(0,C.useCallback)(e=>n(e.target.value),[n]);return(0,k.jsx)(z.oi,{icon:es.W1M,onChange:i,placeholder:"Search",radius:2,value:t||""})}function ns(e){let{value:n}=e,{onInspectClose:t,paneKey:i}=(0,P.Z3)(),l="".concat(i,"_inspect_"),[r,a]=e3("desk-tool","inspect-view-preferred-view-mode-".concat(i),"parsed"),s=e6.find(e=>e.id===r),o=(0,C.useCallback)(()=>{a(e4.id)},[a]),d=(0,C.useCallback)(()=>{a(e5.id)},[a]);return(0,k.jsx)(z.Vq,{id:"".concat(l,"dialog"),header:(0,ee.Uy$)(n)&&(0,ee.HD0)(n._id)&&(0,ee.HD0)(n._type)?(0,k.jsxs)(k.Fragment,{children:["Inspecting"," ",(0,k.jsx)("em",{children:(0,k.jsx)(P.lU,{document:n})})]}):(0,k.jsx)("em",{children:"No value"}),onClose:t,onClickOutside:t,width:3,children:(0,k.jsxs)(z.kC,{direction:"column",height:"fill",children:[(0,k.jsx)(z.Zb,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:(0,k.jsxs)(z.td,{space:1,children:[(0,k.jsx)(z.OK,{"aria-controls":"".concat(l,"tabpanel"),fontSize:1,id:"".concat(l,"tab-").concat(e4.id),label:e4.title,onClick:o,selected:s===e4}),(0,k.jsx)(z.OK,{"aria-controls":"".concat(l,"tabpanel"),fontSize:1,id:"".concat(l,"tab-").concat(e5.id),label:e5.title,onClick:d,selected:s===e5})]})}),(0,k.jsxs)(z.x4,{"aria-labelledby":"".concat(l,"tab-").concat(r),flex:1,id:"".concat(l,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[s===e4&&(0,k.jsx)(nr,{children:(0,k.jsx)(eh(),{data:n,isExpanded:function e(n,t){let i=e8.get(n);return void 0===i?(e8.set(n,Array.isArray(t)||(0,ee.Uy$)(t)),e(n,t)):i},onClick:e7,search:na})}),s===e5&&(0,k.jsx)(z.EK,{language:"json",tabIndex:0,onKeyDown:nn,onDoubleClick:ne,onFocus:ne,children:JSON.stringify(n,null,2)})]})]})})}var no=Object.freeze,nd=Object.defineProperty,nc=(e,n)=>no(nd(e,"raw",{value:no(n||e.slice())}));let nu=(0,ea.ZP)(z.Zb)(h||(h=nc(["\n  position: relative;\n  z-index: 50;\n"]))),np=(0,ea.ZP)(z.xv)(f||(f=nc(["\n  & > * {\n    overflow: hidden;\n    overflow: clip;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n"]))),nh=(0,C.memo)(()=>{var e,n,t,i,l,r;let a=(0,ee.rq_)(),{params:s,groupIndex:o,routerPanesState:d,replaceCurrent:c,BackLink:u}=(0,P.RL)(),p=null==(e=d[o])?void 0:e[0].id,h=d[o-1],f=null==h?void 0:h[0],x=null==f?void 0:f.id,m=!!(null==(n=null==f?void 0:f.params)?void 0:n.rev),j=(0,C.useMemo)(()=>(null==s?void 0:s.parentRefPath)&&(0,ec.mL)(s.parentRefPath)||null,[null==s?void 0:s.parentRefPath]),g=(0,eu.m2)(()=>{let e=null==j?void 0:j[0];if(!x||!e||!j)return(0,O.of)({loading:!1});let n=(0,ee.vsM)(x),t=(0,ec.mL)(e),i=t.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,W.z)((0,O.of)({loading:!0}),a.unstable_observePathsDocumentPair(n,-1===i?t:t.slice(0,i)).pipe((0,Q.b)(750),(0,V.U)(e=>{var n;let{draft:t,published:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:i.availability},refValue:null==(n=(0,ec.U2)(t.snapshot||i.snapshot,j))?void 0:n._ref}}})))},[a,x,j],{loading:!0}),v=(0,C.useCallback)(()=>{var e;!g.loading&&(null==(e=g.result)?void 0:e.refValue)&&c({id:g.result.refValue,params:s})},[g.loading,g.result,c,s]),b=!x||!j||m||g.loading||!(null==(t=g.result)?void 0:t.availability.draft.available)&&!(null==(i=g.result)?void 0:i.availability.published.available)||(null==(l=g.result)?void 0:l.refValue)===p;return b?null:(0,k.jsx)(nu,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:(0,k.jsx)(z.W2,{paddingX:4,paddingY:2,sizing:"border",width:1,children:(0,k.jsxs)(z.kC,{align:"center",children:[(0,k.jsx)(z.xv,{size:1,children:(0,k.jsx)(es.foC,{})}),(null==(r=g.result)?void 0:r.refValue)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.xu,{flex:1,marginLeft:3,children:(0,k.jsx)(np,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),(0,k.jsx)(z.xu,{marginLeft:3,children:(0,k.jsx)(z.zx,{onClick:v,icon:es.bnu,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.xu,{flex:1,marginLeft:3,children:(0,k.jsx)(np,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),(0,k.jsx)(z.xu,{marginLeft:3,children:(0,k.jsx)(z.zx,{as:u,icon:es.Two,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});nh.displayName="ReferenceChangedBanner";var nf=Object.freeze,nx=Object.defineProperty;let nm=(0,ea.ZP)(z.Zb)(x||(x=nf(nx(r=["\n  position: relative;\n  z-index: 50;\n"],"raw",{value:nf(r.slice())}))));function nj(e){var n,t;let{granted:i,requiredPermission:l}=e,r=(0,ee.xJ)(),a=(null==(n=null==r?void 0:r.roles)?void 0:n.length)!==1,s=((null==(t=null==r?void 0:r.roles)?void 0:t.map(e=>(0,k.jsx)("code",{children:e.title},e.name)))||[]).reduce((e,n)=>null===e?[n]:e.concat([", ",n]),null);return i?null:(0,k.jsx)(nm,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:(0,k.jsx)(z.W2,{paddingX:4,paddingY:3,sizing:"border",width:1,children:(0,k.jsxs)(z.kC,{align:"flex-start",children:[(0,k.jsx)(z.xv,{size:1,children:(0,k.jsx)(es.CPA,{})}),(0,k.jsx)(z.xu,{flex:1,marginLeft:3,children:(0,k.jsxs)(z.xv,{size:1,children:["Your role",a&&"s"," ",s," ",a?"do":"does"," not have permissions to"," ",l," this document."]})})]})})})}let ng=e=>e.preventDefault(),nv=(0,C.forwardRef)(function(e,n){var t;let{hidden:i,margins:l}=e,{collapsedFieldSets:r,collapsedPaths:a,displayed:s,editState:o,documentId:d,documentType:c,fieldActions:u,onChange:p,validation:h,ready:f,formState:x,onFocus:m,onBlur:j,onSetCollapsedPath:g,onPathOpen:v,onSetCollapsedFieldSet:b,onSetActiveFieldGroup:y}=(0,P.Z3)(),w=(0,ee.H__)(),_=(0,ee.Dqo)(d),S=(0,C.useMemo)(()=>(0,ee.fm0)(),[]),I=null==(t=null==o?void 0:o.transactionSyncLock)?void 0:t.enabled;!function(e){let n=(0,z.pm)(),t=function(e){let n=(0,C.useRef)();return(0,C.useEffect)(()=>{n.current=e},[e]),n.current}(e.enabled);(0,C.useEffect)(()=>{!t&&e.enabled&&n.push({...e,duration:20736e5}),t&&!e.enabled&&n.push({...e,duration:.01})},[e,n,t])}({id:"sync-lock-".concat(d),status:"warning",enabled:I,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),(0,C.useEffect)(()=>{let e=w.pair.documentEvents(d,c).pipe((0,G.b)(e=>{"mutation"===e.type&&S.publish(function(e){let n=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,ee.Sis)(e.origin,n)}}(e)),"rebase"===e.type&&S.publish(function(e){let n=e.remoteMutations.map(e=>e.patch).filter(Boolean),t=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,ee.Sis)("remote",n).concat((0,ee.Sis)("local",t))}}(e))})).subscribe();return()=>{e.unsubscribe()}},[d,w,c,S]);let E=!!(null==s?void 0:s._rev);(0,C.useEffect)(()=>{E&&S.publish({type:"mutation",patches:[],snapshot:s})},[E]);let[M,O]=(0,C.useState)(null);(0,C.useEffect)(()=>{f&&!(null==x?void 0:x.focusPath.length)&&M&&(0,z.fo)(M)},[f]);let L=(0,C.useCallback)(e=>{O(e),"function"==typeof n?n(e):n&&(n.current=e)},[n]);return(0,k.jsx)(z.W2,{hidden:i,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:(0,k.jsx)(ee.$rW,{margins:l,children:(0,k.jsx)(z.xu,{as:"form",onSubmit:ng,ref:L,children:f?null===x?(0,k.jsx)(z.xu,{padding:2,children:(0,k.jsx)(z.xv,{children:"This form is hidden"})}):(0,k.jsx)(ee.quP,{__internal_fieldActions:u,__internal_patchChannel:S,collapsedFieldSets:r,collapsedPaths:a,focusPath:x.focusPath,changed:x.changed,focused:x.focused,groups:x.groups,id:"root",members:x.members,onChange:p,onFieldGroupSelect:y,onPathBlur:j,onPathFocus:m,onPathOpen:v,onSetFieldSetCollapsed:b,onSetPathCollapsed:g,presence:_,readOnly:x.readOnly,schemaType:x.schemaType,validation:h,value:x.value}):(0,k.jsx)(P.cN,{ms:300,children:(0,k.jsxs)(z.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,k.jsx)(z.$j,{muted:!0}),(0,k.jsx)(z.xu,{marginTop:3,children:(0,k.jsx)(z.xv,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})});function nb(){let{activeViewId:e,paneKey:n,views:t}=(0,P.Z3)(),i="".concat(n,"tabpanel");return(0,k.jsx)(z.td,{space:1,children:t.map((t,l)=>{var r;return(0,k.jsx)(ny,{icon:t.icon,id:"".concat(n,"tab-").concat(t.id),isActive:e===t.id,label:(0,k.jsx)(k.Fragment,{children:t.title}),tabPanelId:i,viewId:0===l?null:null!=(r=t.id)?r:null},t.id)})})}function ny(e){let{isActive:n,tabPanelId:t,viewId:i}=e,{ready:l}=(0,P.Z3)(),{setView:r}=(0,P.RL)(),a=(0,C.useCallback)(()=>r(i),[r,i]);return(0,k.jsx)(z.OK,{...e,"aria-controls":t,disabled:!l,fontSize:1,selected:n,onClick:a})}function nw(){let{connectionState:e,schemaType:n,title:t,value:i}=(0,P.Z3)(),{error:l,value:r}=(0,ee._2T)({enabled:!!i&&"connected"===e,schemaType:n,value:i});return"connected"!==e?(0,k.jsx)(k.Fragment,{}):t?(0,k.jsx)(k.Fragment,{children:t}):i?l?(0,k.jsxs)(k.Fragment,{children:["Error: ",l.message]}):(0,k.jsx)(k.Fragment,{children:(null==r?void 0:r.title)||(0,k.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):(0,k.jsxs)(k.Fragment,{children:["New ",(null==n?void 0:n.title)||(null==n?void 0:n.name)]})}let n_=(0,C.memo)((0,C.forwardRef)(function(e,n){let{onMenuAction:t,onPaneClose:i,onPaneSplit:l,menuItems:r,menuItemGroups:a,schemaType:s,timelineStore:o,ready:d,views:c,unstable_languageFilter:u}=(0,P.Z3)(),{features:p}=(0,P.xu)(),{index:h,BackLink:f,hasGroupSiblings:x}=(0,P.RL)(),{actions:m}=(0,ee.qGk)(),j=(0,C.useMemo)(()=>(0,P.k$)({actionHandler:t,fieldActions:m,menuItems:r,menuItemGroups:a}),[t,m,a,r]),g=(0,C.useMemo)(()=>j.filter(P.Ie),[j]),v=(0,C.useMemo)(()=>j.filter(P.c9),[j]),b=c.length>1,y=(0,ee.P08)(o,e=>e.revTime),{collapsed:w,isLast:_}=(0,P.ec)(),S=_&&!w?-1:0,I=p.splitViews&&l&&c.length>1,E=I&&x,M=!E&&!p.backButton;return(0,k.jsx)(P.hX,{ref:n,loading:!d,title:(0,k.jsx)(nw,{}),tabs:b&&(0,k.jsx)(nb,{}),tabIndex:S,backButton:p.backButton&&h>0&&(0,k.jsx)(z.zx,{as:f,"data-as":"a",icon:es.Y4O,mode:"bleed",padding:2}),subActions:(0,k.jsx)(P.Hj,{chunk:y,mode:"rev",placement:"bottom-end"}),actions:(0,k.jsxs)(z.kC,{align:"center",gap:1,children:[u.length>0&&(0,k.jsx)(k.Fragment,{children:u.map((e,n)=>(0,C.createElement)(e,{key:"language-filter-".concat(n),schemaType:s}))}),g.map(e=>(0,k.jsx)(P.mE,{node:e},e.key)),(0,k.jsx)(P.eu,{nodes:v},"context-menu"),I&&(0,k.jsx)(z.u,{content:(0,k.jsx)(z.xv,{size:1,style:{whiteSpace:"nowrap"},children:"Split pane right"}),padding:2,placement:"bottom",portal:!0,children:(0,k.jsx)(z.zx,{"aria-label":"Split pane right",icon:es.iro,mode:"bleed",onClick:l},"split-pane-button")}),E&&(0,k.jsx)(z.zx,{icon:es.Two,mode:"bleed",onClick:i,title:"Close split pane"},"close-view-button"),M&&(0,k.jsx)(z.zx,{icon:es.Two,mode:"bleed",title:"Close pane group",as:f},"close-view-button")]})})}));var nk=Object.freeze,nC=Object.defineProperty,nz=(e,n)=>nk(nC(e,"raw",{value:nk(n||e.slice())}));let nP=(0,ea.ZP)(z.xu)({position:"relative"}),nS=(0,ea.ZP)(ee.l$t)(e=>{let{$disabled:n}=e;return n?{height:"100%"}:(0,ea.iv)(m||(m=nz(["\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  "])))}),nI=function(e){let{footerHeight:n,isInspectOpen:t,rootElement:i,setDocumentPanelPortalElement:l}=e,{activeViewId:r,displayed:a,documentId:s,editState:o,inspector:d,value:c,views:u,ready:p,schemaType:h,permissions:f,isPermissionsLoading:x}=(0,P.Z3)(),{collapsed:m}=(0,P.Cc)(),{collapsed:j}=(0,P.ec)(),g=(0,z.vI)(),{features:v}=(0,P.xu)(),[b,y]=(0,C.useState)(null),w=(0,z.XL)(b),_=(0,C.useRef)(null),[S,I]=(0,C.useState)(null),E=(0,C.useRef)(null),M=c._createdAt?"update":"create",O=(0,C.useMemo)(()=>u.find(e=>e.id===r)||u[0]||{type:"form"},[r,u]),L=v.splitPanes&&_.current||g.element,R=(0,C.useMemo)(()=>m?[(null==w?void 0:w.height)||0,0,n?n+2:2,0]:[0,0,2,0],[m,n,w]),T="form"!==O.type,W=(0,C.useMemo)(()=>"component"===O.type&&O.component&&(0,C.createElement)(O.component,{document:{draft:(null==o?void 0:o.draft)||null,displayed:a||c,historical:a,published:(null==o?void 0:o.published)||null},documentId:s,options:O.options,schemaType:h}),[O,a,s,null==o?void 0:o.draft,null==o?void 0:o.published,h,c]);(0,C.useEffect)(()=>{(null==S?void 0:S.scrollTo)&&S.scrollTo(0,0)},[s,S]),(0,C.useEffect)(()=>{L&&l(L)},[L,l]);let Z=(0,C.useMemo)(()=>t?(0,k.jsx)(ns,{value:a||c}):null,[t,a,c]),N=!!(!j&&d);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(n_,{ref:y}),(0,k.jsx)(P.Bh,{children:(0,k.jsxs)(z.kC,{height:"fill",children:[(v.resizablePanes||!N)&&(0,k.jsx)(nP,{flex:2,overflow:"hidden",children:(0,k.jsx)(z.Xp,{element:L,__unstable_elements:{documentScrollElement:S},children:(0,k.jsx)(z.NM,{element:S,children:(0,k.jsxs)(ee.Ahg,{scrollElement:S,containerElement:E,children:["form"===O.type&&!x&&p&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(nj,{granted:!!(null==f?void 0:f.granted),requiredPermission:M}),(0,k.jsx)(nh,{})]}),(0,k.jsxs)(nS,{$disabled:m||!1,"data-testid":"document-panel-scroller",ref:I,children:[(0,k.jsx)(nv,{hidden:T,margins:R,ref:E},s+(p?"_ready":"_pending")),W]}),Z,(0,k.jsx)("div",{"data-testid":"document-panel-portal",ref:_})]})})})}),N&&(0,k.jsx)(z.NM,{element:i,children:(0,k.jsx)(ew,{documentId:s,documentType:h.name,flex:1})})]})})]})},nE=["left","bottom"],nM={small:0,medium:1,large:2,full:"auto"};function nO(e){let{dialog:n,referenceElement:t}=e;return(0,k.jsx)(z.J2,{content:(0,k.jsx)(nL,{dialog:n}),fallbackPlacements:nE,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:t})}function nL(e){let{dialog:n}=e,{cancelButtonIcon:t,cancelButtonText:i,confirmButtonIcon:l,confirmButtonText:r,message:a,onCancel:s,onConfirm:o,tone:d}=n,{isTopLayer:c}=(0,z.sJ)(),[u,p]=(0,C.useState)(null),h=(0,C.useCallback)(()=>{c&&s()},[c,s]),f=(0,C.useCallback)(e=>{"Escape"===e.key&&c&&s()},[c,s]);return(0,z.O8)(h,[u]),(0,z.qh)(f),(0,k.jsxs)(z.kC,{direction:"column",ref:p,style:{minWidth:304,maxWidth:400},children:[(0,k.jsx)(z.xu,{flex:1,overflow:"auto",padding:4,children:(0,k.jsx)(z.xv,{children:a})}),(0,k.jsx)(z.xu,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:(0,k.jsxs)(z.rj,{columns:2,gap:2,children:[(0,k.jsx)(z.zx,{icon:t,onClick:s,mode:"ghost",text:i||"Cancel"}),(0,k.jsx)(z.zx,{icon:l,onClick:o,text:r||"Confirm",tone:d})]})})]})}function nR(e){let{dialog:n}=e,t=(0,C.useId)(),i=n.footer&&(0,k.jsx)(z.xu,{paddingX:4,paddingY:3,children:n.footer});return(0,k.jsx)(ee.jr5,{zOffset:"fullscreen",children:(0,k.jsx)(z.Vq,{__unstable_hideCloseButton:!1===n.showCloseButton,footer:i,header:n.header,id:t,onClose:n.onClose,onClickOutside:n.onClose,width:void 0===n.width?1:nM[n.width],children:(0,k.jsx)(z.xu,{padding:4,children:n.content})})})}function nT(e){let{dialog:n,referenceElement:t}=e;return(0,k.jsx)(z.J2,{content:(0,k.jsx)(nW,{dialog:n}),fallbackPlacements:nE,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:t})}function nW(e){let{dialog:n}=e,{content:t,onClose:i}=n,{isTopLayer:l}=(0,z.sJ)(),[r,a]=(0,C.useState)(null),s=(0,C.useCallback)(()=>{l&&i()},[l,i]),o=(0,C.useCallback)(e=>{"Escape"===e.key&&l&&i()},[l,i]);return(0,z.O8)(s,[r]),(0,z.qh)(o),(0,k.jsx)("div",{ref:a,children:t})}function nZ(e){let{children:n}=e,{element:t,elements:i}=(0,z.vI)(),l=(null==i?void 0:i[P.BP])||t;return(0,k.jsx)(z.Xp,{element:l,children:n})}function nN(e){let{dialog:n,referenceElement:t=null}=e,i=(0,C.useId)();return"confirm"===n.type?(0,k.jsx)(nO,{dialog:n,referenceElement:t}):"popover"===n.type?(0,k.jsx)(nT,{dialog:n,referenceElement:t}):"dialog"!==n.type&&n.type?"custom"===n.type?(0,k.jsx)(nZ,{children:null==n?void 0:n.component}):(console.warn("Unsupported modal type ".concat(n.type)),(0,k.jsx)(z.Vq,{id:i,onClose:n.onClose,onClickOutside:n.onClose,width:2,children:(0,k.jsx)(z.xu,{padding:4,children:n.content||(0,k.jsxs)(k.Fragment,{children:["Unexpected modal type (",(0,k.jsx)("code",{children:n.type}),")"]})})})):(0,k.jsx)(nZ,{children:(0,k.jsx)(nR,{dialog:n})})}function nF(e){let{actionStates:n,disabled:t}=e,i=(0,C.useId)(),l=(0,C.useRef)(null),[r,a]=(0,C.useState)(-1),[s,o]=(0,C.useState)(null),d=(0,C.useCallback)(e=>{a(e)},[]),c=(0,C.useMemo)(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),u=n[r];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.j2,{id:"".concat(i,"-action-menu"),button:(0,k.jsx)(z.zx,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:t,icon:es.v4q,mode:"ghost",ref:l}),menu:(0,k.jsx)(z.v2,{padding:1,children:n.map((e,n)=>(0,k.jsx)(nD,{actionState:e,disabled:t,index:n,onAction:d},n))}),popover:c,ref:o}),u&&u.dialog&&(0,k.jsx)(ee.jr5,{zOffset:"paneFooter",children:(0,k.jsx)(nN,{dialog:u.dialog,referenceElement:s})})]})}function nD(e){let{actionState:n,disabled:t,index:i,onAction:l}=e,{onHandle:r}=n,a=(0,C.useCallback)(()=>{l(i),r&&r()},[i,l,r]),s=n.title&&(0,k.jsx)(z.xu,{padding:2,children:(0,k.jsx)(z.xv,{size:1,children:n.title})});return(0,k.jsx)(z.sN,{"data-testid":"action-".concat(n.label.replace(" ","")),disabled:t||!!n.disabled,onClick:a,padding:0,tone:n.tone,children:(0,k.jsx)(z.u,{content:s,disabled:!s,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:(0,k.jsxs)(z.kC,{align:"center",paddingX:3,children:[(0,k.jsxs)(z.kC,{flex:1,paddingY:3,children:[n.icon&&(0,k.jsx)(z.xu,{marginRight:3,children:(0,k.jsxs)(z.xv,{children:[(0,C.isValidElement)(n.icon)&&n.icon,(0,eo.isValidElementType)(n.icon)&&(0,C.createElement)(n.icon)]})}),(0,k.jsx)(z.xv,{children:n.label})]}),n.shortcut&&(0,k.jsx)(z.xu,{marginLeft:3,children:(0,k.jsx)(z.p8,{keys:String(n.shortcut).split("+").map(e=>e.slice(0,1).toUpperCase()+e.slice(1))})})]})})})}function nA(e){let{disabled:n,showMenu:t,states:i}=e,[l,...r]=i,[a,s]=(0,C.useState)(null),o=(0,C.useMemo)(()=>l&&(l.title||l.shortcut)?(0,k.jsxs)(z.kC,{padding:2,style:{maxWidth:300},align:"center",children:[(0,k.jsx)(z.xv,{size:1,children:l.title}),l.shortcut&&(0,k.jsx)(z.xu,{marginLeft:l.title?2:0,children:(0,k.jsx)(z.p8,{keys:String(l.shortcut).split("+").map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())})})]}):null,[l]);return(0,k.jsxs)(z.kC,{children:[l&&(0,k.jsx)(z.li,{zOffset:200,children:(0,k.jsx)(z.u,{disabled:!o,content:o,portal:!0,placement:"top",children:(0,k.jsx)(z.Kq,{flex:1,children:(0,k.jsx)(z.zx,{"data-testid":"action-".concat(l.label),disabled:n||!!l.disabled,icon:l.icon,onClick:l.onHandle,ref:s,text:l.label,tone:l.tone||"primary"})})})}),t&&r.length>0&&(0,k.jsx)(z.xu,{marginLeft:1,children:(0,k.jsx)(nF,{actionStates:r,disabled:n})}),l&&l.dialog&&(0,k.jsx)(nN,{dialog:l.dialog,referenceElement:a})]})}let nK=(0,C.memo)(function(){let{actions:e,connectionState:n,documentId:t,editState:i}=(0,P.Z3)();return e&&i?(0,k.jsx)(ej,{actions:e,actionProps:i,children:i=>{let{states:l}=i;return(0,k.jsx)(nA,{disabled:"connected"!==n,showMenu:e.length>1,states:l},t)}}):null}),nU=(0,C.memo)(function(){let{connectionState:e,editState:n,timelineStore:t}=(0,P.Z3)(),i=(0,ee.P08)(t,e=>e.revTime),l=(null==i?void 0:i.id)||"",r=((null==n?void 0:n.draft)||(null==n?void 0:n.published)||{})._rev===l,a=(0,C.useMemo)(()=>({...n||{},revision:l}),[n,l]),s=(0,C.useMemo)(()=>[P.Ty],[]);return(0,k.jsx)(ej,{actions:s,actionProps:a,children:n=>{let{states:t}=n;return(0,k.jsx)(nA,{disabled:"connected"!==e||!!r,showMenu:!1,states:t})}})}),nV={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function nX(e){let{states:n}=e;return(0,k.jsx)(z.gF,{space:1,children:n.map((e,n)=>(0,k.jsx)(z.u,{content:e.title&&(0,k.jsx)(z.xu,{padding:2,children:(0,k.jsx)(z.xv,{size:1,children:e.title})}),disabled:!e.title,placement:"top",portal:!0,children:(0,k.jsx)(z.Ct,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?nV[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},String(n)))})}function nB(){let{badges:e,editState:n}=(0,P.Z3)();return n&&e?(0,k.jsx)(eg,{badges:e,badgeProps:n,children:e=>{let{states:n}=e;return(0,k.jsx)(nX,{states:n})}}):null}var nq=Object.freeze,nH=Object.defineProperty;let n$=(0,ea.ZP)(z.kC)(j||(j=nq(nH(a=["\n  cursor: default;\n"],"raw",{value:nq(a.slice())}))));function nY(e){let{collapsed:n,disabled:t,lastPublished:i,lastUpdated:l,liveEdit:r}=e,a=(0,ee.INm)(i||"",{minimal:!0,agoSuffix:!0}),s=(0,ee.INm)(i||"",{minimal:!0}),o=(0,ee.INm)(l||"",{minimal:!0,agoSuffix:!0}),d=(0,ee.INm)(l||"",{minimal:!0}),c=(0,ee.INm)(l||"",{minimal:!1,agoSuffix:!0}),u=(0,ee.INm)(i||"",{minimal:!1,agoSuffix:!0}),p=r?"Last updated ".concat(c):"Last published ".concat(u);return(0,k.jsx)(n$,{align:"center","data-ui":"SessionLayout",sizing:"border",children:(0,k.jsx)(z.u,{placement:"top",portal:!0,content:(0,k.jsx)(z.Kq,{padding:3,space:3,children:(0,k.jsx)(z.xv,{size:1,children:r?(0,k.jsxs)(k.Fragment,{children:["Last updated"," ",(0,k.jsx)("abbr",{"aria-label":l?c:u,children:l?o:a})]}):(0,k.jsxs)(k.Fragment,{children:["Last published ",(0,k.jsx)("abbr",{"aria-label":u,children:a})]})})}),children:(0,k.jsx)(z.zx,{mode:"bleed",tone:r?"critical":"positive",tabIndex:-1,disabled:t,"aria-label":p,children:(0,k.jsxs)(z.kC,{align:"center",children:[(0,k.jsx)(z.xu,{marginRight:n?0:3,children:(0,k.jsx)(z.xv,{size:2,"aria-hidden":"true",children:r?(0,k.jsx)(es.o1U,{}):(0,k.jsx)(es.EI4,{})})}),!n&&(0,k.jsx)(z.xv,{size:1,weight:"medium",children:r?(0,k.jsx)("abbr",{"aria-label":p,children:l?d:s}):(0,k.jsx)("abbr",{"aria-label":p,children:s})})]})})})})}var nJ=Object.freeze,nQ=Object.defineProperty,nG=(e,n)=>nJ(nQ(e,"raw",{value:nJ(n||e.slice())}));let n0=(0,ea.ZP)(em.E.path)(g||(g=nG(["\n  transform-origin: center;\n"]))),n1=e=>(0,k.jsx)(em.E.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n2=e=>(0,k.jsx)(n0,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n3=e=>(0,k.jsx)(em.E.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n4=e=>(0,k.jsx)(em.E.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...e}),n5=(0,ea.F4)(v||(v=nG(["\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),n6=ea.ZP.g(b||(b=nG(["\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: "," 1s ease-in-out infinite;\n  }\n"])),n5),n8={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},n7={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},n9={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},te={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},tn={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function tt(e){let{status:n}=e;return n?(0,k.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:(0,k.jsxs)(em.E.g,{variants:n8,initial:n,animate:n,children:[(0,k.jsxs)(n6,{"data-rotate":"changes"===n?void 0:"",children:[(0,k.jsx)(n2,{variants:n9,initial:n,animate:n}),(0,k.jsx)(n1,{variants:n7,initial:n,animate:n})]}),(0,k.jsx)(n3,{variants:te,initial:n,animate:n}),(0,k.jsx)(n4,{variants:tn,initial:n,animate:n})]})}):null}let ti=C.forwardRef(function(e,n){let{collapsed:t,status:i,lastUpdated:l,...r}=e,a=(0,ee.INm)(l||"",{minimal:!0}),s=(0,ee.INm)(l||"",{minimal:!0,agoSuffix:!0}),o=(0,ee.INm)(l||"",{minimal:!1,agoSuffix:!0}),d=(0,C.useMemo)(()=>"syncing"===i?{text:"Saving...",tone:void 0}:"changes"===i?{text:a,tone:"caution"}:"saved"===i?{text:"Saved!",tone:"positive"}:{},[i,a]);return i?(0,k.jsx)(z.u,{placement:"top",portal:!0,disabled:"changes"!==i,content:(0,k.jsxs)(z.Kq,{padding:3,space:3,children:[(0,k.jsx)(z.xv,{size:1,weight:"semibold",children:"Review changes"}),(0,k.jsxs)(z.xv,{size:1,muted:!0,children:["Changes saved ",(0,k.jsx)("abbr",{"aria-label":o,children:s})]})]}),children:(0,k.jsx)(z.zx,{mode:"bleed",justify:"flex-start",tone:null==d?void 0:d.tone,...r,"data-testid":"review-changes-button",ref:n,"aria-label":"Review changes",children:(0,k.jsxs)(z.kC,{align:"center",children:[(0,k.jsx)(z.xu,{marginRight:t?0:3,"aria-hidden":"true",children:(0,k.jsx)(z.xv,{children:(0,k.jsx)(tt,{status:i})})}),!t&&(0,k.jsx)(z.xv,{size:1,weight:"medium",children:null==d?void 0:d.text})]})})}):null}),tl=C.memo(ti),tr=(0,C.memo)(function(){var e;let{changesOpen:n,documentId:t,documentType:i,editState:l,onHistoryClose:r,onHistoryOpen:a,timelineStore:s,value:o}=(0,P.Z3)(),d=(0,ee.nuD)(t,i),c=null==o?void 0:o._updatedAt,u=null==(e=null==l?void 0:l.published)?void 0:e._updatedAt,p=!!(null==l?void 0:l.liveEdit),h=!!(null==l?void 0:l.published),f=!!(null==l?void 0:l.draft),[x,m]=(0,C.useState)(null),j=(0,z.XL)(x),g=!j||(null==j?void 0:j.width)<300,[v,b]=(0,C.useState)(null),y=(0,ee.P08)(s,e=>e.onOlderRevision);(0,C.useEffect)(()=>{if("syncing"===v&&!d.isSyncing){let e=setTimeout(()=>b("saved"),1e3);return()=>clearTimeout(e)}if("saved"===v){let e=setTimeout(()=>b(null),3e3);return()=>clearTimeout(e)}},[v,c,d.isSyncing]),(0,C.useLayoutEffect)(()=>{b(null)},[t]),(0,C.useLayoutEffect)(()=>{d.isSyncing&&b("syncing")},[d.isSyncing,c]);let w=(0,C.useMemo)(()=>(0,k.jsx)(tl,{lastUpdated:c,status:v||(f?"changes":void 0),onClick:n?r:a,disabled:y,selected:n,collapsed:g}),[f,n,r,a,c,y,v,g]),_=(0,C.useMemo)(()=>(p||h)&&(0,k.jsx)(z.xu,{marginRight:1,children:(0,k.jsx)(nY,{disabled:y,lastPublished:u,lastUpdated:c,liveEdit:p,collapsed:g})}),[g,u,c,p,h,y]);return(0,k.jsxs)(z.kC,{align:"center","data-ui":"DocumentSparkline",ref:m,children:[_,(0,k.jsxs)(z.kC,{align:"center",flex:1,children:[w,!g&&(0,k.jsx)(z.xu,{marginLeft:3,children:(0,k.jsx)(nB,{})})]})]})});var ta=Object.freeze,ts=Object.defineProperty;let to=(0,ea.ZP)(z.xu)(y||(y=ta(ts(s=["\n  min-width: 10em;\n  max-width: 16em;\n"],"raw",{value:ta(s.slice())}))));function td(e){let{actionsBoxRef:n}=e,{badges:t,timelineStore:i}=(0,P.Z3)(),l=(0,ee.P08)(i,e=>e.onOlderRevision);return(0,C.useMemo)(()=>(0,k.jsx)(z.xu,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:(0,k.jsxs)(z.kC,{align:"center",children:[(0,k.jsx)(z.xu,{flex:[1,2],children:t&&(0,k.jsx)(tr,{})}),(0,k.jsx)(to,{flex:1,marginLeft:[1,3],ref:n,children:l?(0,k.jsx)(nU,{}):(0,k.jsx)(nK,{})})]})}),[n,t,l])}function tc(e){let{actionsBoxElement:n,activeIndex:t,as:i="div",children:l,id:r,onActionStart:a,onKeyDown:s,rootRef:o,states:d,...c}=e,u=d[t],p=(0,C.useCallback)(e=>{let n=d.filter(n=>n.shortcut&&(0,ed.ZP)(n.shortcut,e)),t=n[0];if(n.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(t.shortcut,'"')),t&&!t.disabled&&t.onHandle){e.preventDefault(),t.onHandle(),a(d.indexOf(t));return}s&&s(e)},[a,s,d]);return(0,C.createElement)(i,{id:r,onKeyDown:p,tabIndex:-1,...c,ref:o},[l,u&&u.dialog&&(0,k.jsx)(ee.jr5,{zOffset:"paneFooter",children:(0,k.jsx)(nN,{dialog:u.dialog,referenceElement:n})})])}let tu=C.memo(e=>{let{actionsBoxElement:n,as:t="div",children:i,...l}=e,{actions:r,editState:a}=(0,P.Z3)(),[s,o]=(0,C.useState)(-1),d=(0,C.useCallback)(e=>{o(e)},[]),c=(0,C.useMemo)(()=>a&&{...a,onComplete:()=>void 0,revision:void 0},[a]);return c&&r?(0,k.jsx)(ej,{actionProps:c,actions:r,children:e=>{let{states:r}=e;return(0,k.jsx)(tc,{...l,activeIndex:s,actionsBoxElement:n,as:t,onActionStart:d,states:r,children:i})}}):null});tu.displayName="DocumentActionShortcuts";var tp=Object.freeze,th=Object.defineProperty;let tf=["fixed","absolute"],tx=(0,ea.ZP)(ee.jbM)(w||(w=tp(th(o=["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  min-width: 0;\n"],"raw",{value:tp(o.slice())})))),tm=(0,C.memo)(function(e){let{name:n}=(0,ee.Lky)();return(0,k.jsx)(ee.cWh,{name:e.pane.source||n,children:(0,k.jsx)(tj,{...e})})});function tj(e){var n;let{pane:t,paneKey:i}=e,{resolveNewDocumentOptions:l}=(0,ee.Lky)().document,r=(0,P.RL)(),a=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,ee.zEW)();return(0,C.useMemo)(()=>{if(e.type&&"*"!==e.type)return e;let i=e.template||n.template,l=i?t.find(e=>e.id===i):void 0,r=null==l?void 0:l.schemaType;return r?{...e,type:r}:e},[e,n.template,t])}(t.options,r.params),{documentType:s,isLoaded:o}=(0,ee.Hdz)(a.id,a.type),d=(0,C.useMemo)(()=>l({type:"document",documentId:a.id,schemaType:a.type}),[a.id,a.type,l]),[c,u]=(0,ee.UMU)({templateItems:d}),p=o&&!u,h=(0,C.useMemo)(()=>p&&s&&a.type!==s?{...e,pane:{...e.pane,options:{...a,type:s}}}:e,[e,s,p,a]),{ReferenceChildLink:f,handleEditReference:x,groupIndex:m,routerPanesState:j}=r,g=(null==(n=j[m+1])?void 0:n[0].params)||{},v=j.length,{parentRefPath:b}=g,y=(0,C.useMemo)(()=>b?{path:(0,ec.mL)(b),state:m>=v-1?"none":m>=v-2?"selected":"pressed"}:{path:[],state:"none"},[b,m,v]);return"*"!==a.type||p?s?(0,k.jsx)(P.oK,{...h,children:(0,k.jsx)(ee.euX,{EditReferenceLinkComponent:f,onEditReference:x,initialValueTemplateItems:c,activePath:y,children:(0,k.jsx)(tg,{})})},"".concat(s,"-").concat(a.id)):(0,k.jsx)(e0,{flex:2.5,minWidth:320,paneKey:i,title:(0,k.jsx)(k.Fragment,{children:"The document was not found"}),children:(0,k.jsx)(z.Kq,{space:4,children:(0,k.jsxs)(z.xv,{as:"p",children:["The document type is not defined, and a document with the ",(0,k.jsx)("code",{children:a.id})," ","identifier could not be found."]})})}):(0,k.jsx)(eJ,{flex:2.5,minWidth:320,paneKey:i,title:"Loading document…"})}function tg(){let{changesOpen:e,documentType:n,inspector:t,inspectOpen:i,onFocus:l,onPathOpen:r,onHistoryOpen:a,onKeyUp:s,paneKey:o,schemaType:d,value:c}=(0,P.Z3)(),{collapsed:u}=(0,P.Cc)(),p=(0,ee.Cnp)(),[h,f]=(0,C.useState)(null),[x,m]=(0,C.useState)(null),[j,g]=(0,C.useState)(null),[v,b]=(0,C.useState)(null),y=(0,z.XL)(x),w=null==y?void 0:y.height,_=(0,C.useCallback)(e=>{r(e),l(e)},[r,l]),S=P.jE+(t?P.VQ:0),I=P.nK+(t?P.VQ:0);return d?(0,k.jsxs)(tu,{actionsBoxElement:j,as:P.X6,currentMinWidth:S,"data-testid":"document-pane",flex:2.5,id:o,minWidth:I,onKeyUp:s,rootRef:f,children:[(0,k.jsx)(z.Tu,{position:tf,zOffset:p.portal,children:(0,k.jsx)(z.kC,{direction:"column",flex:1,height:u?void 0:"fill",children:(0,k.jsx)(tx,{"data-testid":"change-connector-root",isReviewChangesOpen:e,onOpenReviewChanges:a,onSetFocus:_,children:(0,k.jsx)(nI,{footerHeight:w||null,isInspectOpen:i,rootElement:h,setDocumentPanelPortalElement:b})})})}),(0,k.jsx)(z.Xp,{__unstable_elements:{[P.BP]:v},children:(0,k.jsx)(z.Tu,{position:tf,zOffset:p.portal,children:(0,k.jsx)(P.PV,{ref:m,children:(0,k.jsx)(td,{actionsBoxRef:g})})})}),(0,k.jsx)(e2,{})]}):(0,k.jsx)(e0,{currentMinWidth:S,flex:2.5,minWidth:I,paneKey:o,title:(0,k.jsxs)(k.Fragment,{children:["Unknown document type: ",(0,k.jsx)("code",{children:n})]}),tone:"caution",children:(0,k.jsxs)(z.Kq,{space:4,children:[n&&(0,k.jsxs)(z.xv,{as:"p",children:["This document has the schema type ",(0,k.jsx)("code",{children:n}),", which is not defined as a type in the local content studio schema."]}),!n&&(0,k.jsx)(z.xv,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),ee.r8Q&&c&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(z.xv,{as:"p",children:"Here is the JSON representation of the document:"}),(0,k.jsx)(z.Zb,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,k.jsx)(z.EK,{language:"json",size:[1,1,2],children:JSON.stringify(c,null,2)})})]})]})})}function tv(){return(0,k.jsx)(z.Zb,{height:"fill",children:(0,k.jsx)(z.kC,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:(0,k.jsx)(z.W2,{width:0,children:(0,k.jsx)(z.Zb,{padding:4,radius:2,shadow:1,tone:"caution",children:(0,k.jsxs)(z.kC,{children:[(0,k.jsx)(z.xu,{children:(0,k.jsx)(z.xv,{size:1,children:(0,k.jsx)(es.foC,{})})}),(0,k.jsxs)(z.Kq,{flex:1,marginLeft:3,space:3,children:[(0,k.jsx)(z.xv,{as:"h1",size:1,weight:"bold",children:"No document types"}),(0,k.jsx)(z.xv,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),(0,k.jsx)(z.xv,{as:"p",muted:!0,size:1,children:(0,k.jsx)("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}var tb=Object.freeze,ty=Object.defineProperty;let tw=(0,ea.ZP)(function(e){let{children:n,minWidth:t,onCollapse:i,onExpand:l,...r}=e,a=(0,C.useMemo)(()=>(function(){let e=[],n=[],t=new WeakMap,i=new Set,l={},r=null,a=0,s=null,o=new Map,d=!1;function c(e){i.delete(e),s=e,u()}return{collapse:function(e){i.add(e),s===e&&(s=null),u()},expand:c,mount:function(e,i){return t.set(e,{...i,original:i}),n.push(e),r&&function(e,n){let t=new WeakMap;for(let i of n)t.set(i,function(e,n){let t=[],i=n;for(;i!==e;){let n=i.parentElement;if(!n)break;let l=Array.from(n.childNodes),r=l.indexOf(i);if(t.unshift(r),n===e)break;i=n}return t}(e,i));n.sort((e,n)=>{let i=t.get(e)||ey,l=t.get(n)||ey,r=Math.max(i.length,l.length);for(let e=0;e<r;e+=1){let n=i[e]||-1,t=l[e]||-1;if(n!==t)return n-t}return 0})}(r,n),c(e),()=>{let i=n.indexOf(e);i>-1&&n.splice(i,1),t.delete(e),u()}},resize:function(e,i,r){var a,s,c,p;let h=n.indexOf(i),f=t.get(i);if(!f)return;let x=n[h+1],m=t.get(x);if(m){if("start"===e&&(d=!0,l.left={element:i,flex:f.flex||1,width:i.offsetWidth},l.right={element:x,flex:m.flex||1,width:x.offsetWidth},u()),"move"===e&&l.left&&l.right){o=new Map;let{leftW:e,rightW:n,leftFlex:t,rightFlex:a}=function(e,n,t,i){var l,r;let a={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},s=null!=(l=n.minWidth)?l:P.nR,o=null!=(r=t.minWidth)?r:P.nR,d=Math.min(n.maxWidth||1/0,a.width-o),c=Math.min(t.maxWidth||1/0,a.width-s),u=s-e.left.width,p=e.right.width-c;u<p&&(u=p);let h=e.right.width-o,f=d-e.left.width;h>f&&(h=f);let x=Math.min(Math.max(i,u),h),m=e.left.width+x,j=e.right.width-x,g=m/a.width*a.flex,v=j/a.width*a.flex;return{leftFlex:g,leftW:m,rightFlex:v,rightW:j}}(l,f,m,r);o.set(i,{flex:t,width:e}),o.set(x,{flex:a,width:n}),u()}if("end"===e){d=!1;let e=o.get(i),n=o.get(x);t.set(i,{...f,currentMinWidth:0,currentMaxWidth:null!=(a=f.maxWidth)?a:1/0,flex:null!=(s=null==e?void 0:e.flex)?s:f.flex}),t.set(x,{...m,currentMinWidth:0,currentMaxWidth:null!=(c=f.maxWidth)?c:1/0,flex:null!=(p=null==n?void 0:n.flex)?p:m.flex}),o=new Map,delete l.left,delete l.right,u()}}},setRootElement:function(e){r=e},setRootWidth:function(e){a=e,u()},subscribe:function(n){return e.push(n),()=>{let t=e.push(n);t>-1&&e.splice(t,1)}}};function u(){var l,r,c,u;if(!a)return;let p=[];for(let e of n)e!==s&&p.unshift(e);s&&p.unshift(s);let h=new WeakMap,f=p.length,x=p[0],m=(f-1)*P.AA,j=a-m;for(let e of p){let n=t.get(e);if(!n)continue;let a=n.currentMinWidth||n.minWidth||P.nR,s=e===x,d=i.has(e),p=a>j,f=!s&&(d||p),m=o.get(e);h.set(e,{element:e,collapsed:f,currentMinWidth:null!=(l=null==m?void 0:m.width)?l:n.currentMinWidth,currentMaxWidth:null!=(r=null==m?void 0:m.width)?r:n.currentMaxWidth,flex:null!=(u=null!=(c=null==m?void 0:m.flex)?c:n.flex)?u:1}),f?j-=P.AA:j-=a-P.AA}let g=[];for(let e of n){let n=h.get(e);n&&g.push(n)}for(let t of e)t({expandedElement:s||n[n.length-1]||null,panes:g,resizing:d})}})(),[]),[s,o]=(0,C.useState)(null),d=(0,z.XL)(s),c=(null==d?void 0:d.width)||0,u=void 0!==c&&t?c<t:void 0,[p,h]=(0,C.useState)({expandedElement:null,panes:[],resizing:!1});(0,C.useEffect)(()=>a.setRootElement(s),[a,s]),(0,C.useEffect)(()=>a.setRootWidth(c),[a,c]),(0,C.useEffect)(()=>a.subscribe(h),[a]),(0,C.useEffect)(()=>{void 0!==u&&(u&&i&&i(),!u&&l&&l())},[u,i,l]);let f=(0,C.useMemo)(()=>({collapse:a.collapse,collapsed:u,expand:a.expand,expandedElement:p.expandedElement,mount:a.mount,panes:p.panes,resize:a.resize,resizing:p.resizing}),[u,a,p.expandedElement,p.panes,p.resizing]);return(0,k.jsx)(P.yq.Provider,{value:f,children:(0,k.jsx)(P.fC,{"data-ui":"PaneLayout",...r,"data-collapsed":u?"":void 0,"data-resizing":p.resizing?"":void 0,"data-mounted":c?"":void 0,ref:o,children:n})})})(_||(_=tb(ty(d=["\n  min-height: 100%;\n  min-width: 320px;\n"],"raw",{value:tb(d.slice())})))),t_=(0,ed.ZP)("mod+s"),tk=(0,C.memo)(function(e){var n;let{onPaneChange:t}=e,{push:i}=(0,z.pm)(),l=(0,ee.I_y)(),{layoutCollapsed:r,setLayoutCollapsed:a}=(0,P.xu)(),{paneDataItems:s,resolvedPanes:o}=function(){let[e,n]=(0,C.useState)();if(e)throw e;let{structureContext:t,rootPaneNode:i}=(0,P.xu)(),[l,r]=(0,C.useState)({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),a=function(){let e=(0,C.useMemo)(()=>new N.t(1),[]),n=(0,C.useMemo)(()=>e.asObservable().pipe((0,V.U)(e=>(null==e?void 0:e.panes)||[])),[e]),{state:t}=(0,el.tv)();return(0,C.useEffect)(()=>{e.next(t)},[t,e]),n}();return(0,C.useEffect)(()=>{let e=(function(e){let{routerPanesStream:n,rootPaneNode:t,initialCacheState:i={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>Z.C},structureContext:l}=e,r=n.pipe((0,V.U)(e=>[[{id:"root"}],...e]),(0,V.U)(e=>{let n=e.flatMap((e,n)=>e.map((e,t)=>({routerPaneSibling:e,groupIndex:n,siblingIndex:t}))).map((e,n)=>({...e,flatIndex:n}));return n}),(0,X.O)([]),(0,B.e)(function(e,n){var t,i=!1;e.subscribe((0,q.x)(n,function(e){var l=t;t=e,i&&n.next([l,e]),i=!0}))}),(0,V.U)(e=>{let[n,t]=e;for(let e=0;e<t.length;e++){let i=n[e],l=t[e];if(!ei()(i,l))return{flattenedRouterPanes:t,diffIndex:e}}return{flattenedRouterPanes:t,diffIndex:t.length}}),(0,H.R)((e,n)=>{let{cacheKeysByFlatIndex:t,resolvedPaneCache:i}=e,{flattenedRouterPanes:l,diffIndex:r}=n,a=t.slice(0,r+1),s=t.slice(r+1),o=new Set(a.flatMap(e=>Array.from(e))),d=s.flatMap(e=>Array.from(e)).filter(e=>!o.has(e));for(let e of d)i.delete(e);return{flattenedRouterPanes:l,cacheKeysByFlatIndex:t,resolvedPaneCache:i,resolvePane:eT(e=>(n,l,r)=>{var a,s;let o=n&&"".concat(eS(n),"-").concat("contextHash(".concat(JSON.stringify({id:l.id,parentId:parent&&eS(parent),path:l.path,index:l.index,splitIndex:l.splitIndex,serializeOptionsIndex:null==(a=l.serializeOptions)?void 0:a.index,serializeOptionsPath:null==(s=l.serializeOptions)?void 0:s.path}),")")),d=o&&i.get(o);if(d)return d;let c=e(n,l,r);if(!o)return c;let u=t[r]||new Set;return u.add(o),t[r]=u,i.set(o,c),c})}},i),(0,U.w)(e=>{let{flattenedRouterPanes:n,resolvePane:i}=e;return function e(n){let{unresolvedPane:t,flattenedRouterPanes:i,parent:l,path:r,resolvePane:a,structureContext:s}=n,[o,...d]=i,c=d[0],u={id:o.routerPaneSibling.id,splitIndex:o.siblingIndex,parent:l,path:[...r,o.routerPaneSibling.id],index:o.flatIndex,params:o.routerPaneSibling.params||{},payload:o.routerPaneSibling.payload,structureContext:s};try{return a(t,u,o.flatIndex).pipe((0,U.w)(n=>{let i;let p={type:"resolvedMeta",...o,paneNode:n,path:u.path},h=d.map((e,n)=>{let t=[...u.path,...d.slice(n).map((n,t)=>"[".concat(e.flatIndex+t,"]"))],i={type:"loading",path:t,paneNode:null,...e};return i});return d.length?(i=(null==c?void 0:c.routerPaneSibling.id.startsWith("__edit__"))?e({unresolvedPane:eZ,flattenedRouterPanes:d,parent:l,path:u.path,resolvePane:a,structureContext:s}):o.groupIndex===(null==c?void 0:c.groupIndex)?e({unresolvedPane:t,flattenedRouterPanes:d,parent:l,path:r,resolvePane:a,structureContext:s}):e({unresolvedPane:"function"==typeof n.child?eE(n,"child"):n.child,flattenedRouterPanes:d,parent:n,path:u.path,resolvePane:a,structureContext:s}),(0,W.z)((0,O.of)([p,...h]),i.pipe((0,V.U)(e=>[p,...e])))):(0,O.of)([p])}))}catch(e){if(e instanceof ez&&(e.context&&console.warn("Pane resolution error at index ".concat(e.context.index).concat(e.context.splitIndex>0?" for split pane index ".concat(e.context.splitIndex):"",": ").concat(e.message).concat(e.helpId?" - see ".concat((0,en.h)(e.helpId)):""),e),"structure-item-returned-no-child"===e.helpId))return(0,O.of)([]);throw e}}({unresolvedPane:t,flattenedRouterPanes:n,parent:null,path:[],resolvePane:i,structureContext:l})}));return r.pipe((0,H.R)((e,n)=>n.map((n,t)=>{let i=e[t];return i&&"loading"===n.type&&i.routerPaneSibling.id===n.routerPaneSibling.id?i:n}),[]),(0,$.x)((e,n)=>{if(e.length!==n.length)return!1;for(let t=0;t<n.length;t++){let i=e[t],l=n[t];if(eN(i)!==eN(l))return!1}return!0}))})({rootPaneNode:i,routerPanesStream:a,structureContext:t}).pipe((0,V.U)(e=>{let n=e.reduce((e,n)=>{let t=e[n.groupIndex]||[];return t[n.siblingIndex]=n.routerPaneSibling,e[n.groupIndex]=t,e},[]),t=n.length,i=e.map(i=>{var l;let{groupIndex:r,flatIndex:a,siblingIndex:s,routerPaneSibling:o,path:d}=i,c=o.id,u=n[r+1],p={active:r===t-2,childItemId:null!=(l=null==u?void 0:u[0].id)?l:null,index:a,itemId:o.id,groupIndex:r,key:"".concat("loading"===i.type?"unknown":i.paneNode.id,"-").concat(c,"-").concat(s),pane:"loading"===i.type?P.PF:i.paneNode,params:o.params||{},path:d.join(";"),payload:o.payload,selected:a===e.length-1,siblingIndex:s};return p});return{paneDataItems:i,routerPanes:n,resolvedPanes:i.map(e=>e.pane)}})),l=e.subscribe({next:e=>r(e),error:e=>n(e)});return()=>l.unsubscribe()},[i,a,t]),l}(),d=(0,el.z)((0,C.useCallback)(e=>"string"==typeof e.intent,[])),[c,u]=(0,C.useState)(null),p=(0,C.useCallback)(()=>a(!0),[a]),h=(0,C.useCallback)(()=>a(!1),[a]);(0,C.useEffect)(()=>{o.length&&t(o)},[t,o]),(0,C.useEffect)(()=>{let e=e=>{t_(e)&&(e.preventDefault(),i({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i]);let f=null==(n=l._original)?void 0:n.types.some(ee.mPO);return f?(0,k.jsxs)(z.Xp,{element:c||null,children:[(0,k.jsxs)(tw,{flex:1,height:r?void 0:"fill",minWidth:512,onCollapse:p,onExpand:h,children:[s.map(e=>{let{active:n,childItemId:t,groupIndex:i,itemId:l,key:r,pane:a,index:s,params:o,path:d,payload:c,siblingIndex:u,selected:p}=e;return(0,k.jsx)(C.Fragment,{children:a===P.PF?(0,k.jsx)(eJ,{paneKey:r,path:d,selected:p}):(0,k.jsx)(eG,{active:n,groupIndex:i,index:s,pane:a,childItemId:t,itemId:l,paneKey:r,params:o,payload:c,path:d,selected:p,siblingIndex:u})},"".concat(a===P.PF?"loading":a.type,"-").concat(s))}),s.length<=1&&d&&(0,k.jsx)(eJ,{paneKey:"intent-resolver"})]}),(0,k.jsx)("div",{"data-portal":"",ref:u})]}):(0,k.jsx)(tv,{})});var tC=Object.freeze({__proto__:null,default:function(e){let{tool:{options:n}}=e,{unstable_sources:t}=(0,ee.cFj)(),[i]=t,{source:l,defaultDocumentNode:r,structure:a}=n||{};(0,C.useEffect)(()=>((0,P.aR)([]),()=>(0,P.aR)([])),[]);let[{error:s},o]=(0,C.useState)({error:null});return s?(0,k.jsx)(eX,{error:s}):(0,k.jsx)(z.SV,{onCatch:o,children:(0,k.jsx)(ee.cWh,{name:l||i.name,children:(0,k.jsxs)(P.Sg,{defaultDocumentNode:r,structure:a,children:[(0,k.jsx)(tk,{onPaneChange:P.aR}),(0,k.jsx)(eA,{})]})})})}})}}]);